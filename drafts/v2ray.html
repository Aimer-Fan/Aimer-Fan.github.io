<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>使用 v2Ray 搭建 VPS | AimerFan</title><meta name="description" content="aimer fan's blog repo.">
    <link rel="modulepreload" href="/assets/app.cbf35e07.js"><link rel="modulepreload" href="/assets/v2ray.html.ce34de8f.js"><link rel="modulepreload" href="/assets/v2ray.html.fad86528.js"><link rel="prefetch" href="/assets/index.html.1e88ebbb.js"><link rel="prefetch" href="/assets/index.html.cedfaa0c.js"><link rel="prefetch" href="/assets/Git_GitHub.html.1ee39485.js"><link rel="prefetch" href="/assets/index.html.9cdccac4.js"><link rel="prefetch" href="/assets/index.html.f6641bb3.js"><link rel="prefetch" href="/assets/index.html.8690e658.js"><link rel="prefetch" href="/assets/index.html.4e6e5c05.js"><link rel="prefetch" href="/assets/brew-change-origin.html.836badd5.js"><link rel="prefetch" href="/assets/package-manager.html.1b1c9b42.js"><link rel="prefetch" href="/assets/package.json.html.4631f4f2.js"><link rel="prefetch" href="/assets/permission.html.153538bb.js"><link rel="prefetch" href="/assets/shadow-socks-r.html.d3305835.js"><link rel="prefetch" href="/assets/shell.html.a9cd359c.js"><link rel="prefetch" href="/assets/01-abstract.html.f0b6a374.js"><link rel="prefetch" href="/assets/02-grammar.html.661b7ff9.js"><link rel="prefetch" href="/assets/03-select.html.aeda8c6e.js"><link rel="prefetch" href="/assets/04-operator.html.475e4f3f.js"><link rel="prefetch" href="/assets/05-order-and-page.html.a3dab98a.js"><link rel="prefetch" href="/assets/06-multiple-table.html.c304e491.js"><link rel="prefetch" href="/assets/index.html.101b2f28.js"><link rel="prefetch" href="/assets/tapable.html.faa36181.js"><link rel="prefetch" href="/assets/vim.html.99ce84fd.js"><link rel="prefetch" href="/assets/cache.html.615fd64f.js"><link rel="prefetch" href="/assets/cross-origin-resource-sharing.html.f46eac43.js"><link rel="prefetch" href="/assets/cross-origin.html.b18fe09e.js"><link rel="prefetch" href="/assets/download-file.html.d2e313ab.js"><link rel="prefetch" href="/assets/gcc.html.222e57c3.js"><link rel="prefetch" href="/assets/gzip.html.91dd2ff1.js"><link rel="prefetch" href="/assets/qiankun.html.a5d58a01.js"><link rel="prefetch" href="/assets/regexp.html.215d01f7.js"><link rel="prefetch" href="/assets/vue3-reactivity.html.bcb7e472.js"><link rel="prefetch" href="/assets/index.html.e7560b41.js"><link rel="prefetch" href="/assets/404.html.265028f6.js"><link rel="prefetch" href="/assets/index.html.dae261ee.js"><link rel="prefetch" href="/assets/index.html.221a0ddc.js"><link rel="prefetch" href="/assets/Git_GitHub.html.b71f641d.js"><link rel="prefetch" href="/assets/index.html.a219482e.js"><link rel="prefetch" href="/assets/index.html.399c02c1.js"><link rel="prefetch" href="/assets/index.html.a8bb5dbf.js"><link rel="prefetch" href="/assets/index.html.737f5985.js"><link rel="prefetch" href="/assets/brew-change-origin.html.85494073.js"><link rel="prefetch" href="/assets/package-manager.html.430b6d12.js"><link rel="prefetch" href="/assets/package.json.html.70aa6e0f.js"><link rel="prefetch" href="/assets/permission.html.c3bfacf6.js"><link rel="prefetch" href="/assets/shadow-socks-r.html.4d231b0f.js"><link rel="prefetch" href="/assets/shell.html.8bcf8348.js"><link rel="prefetch" href="/assets/01-abstract.html.9f66f3d0.js"><link rel="prefetch" href="/assets/02-grammar.html.9fe43eef.js"><link rel="prefetch" href="/assets/03-select.html.1deb7dbb.js"><link rel="prefetch" href="/assets/04-operator.html.fb89566a.js"><link rel="prefetch" href="/assets/05-order-and-page.html.ffce7199.js"><link rel="prefetch" href="/assets/06-multiple-table.html.a0377bf3.js"><link rel="prefetch" href="/assets/index.html.0a219270.js"><link rel="prefetch" href="/assets/tapable.html.c39dfe04.js"><link rel="prefetch" href="/assets/vim.html.e448d7cd.js"><link rel="prefetch" href="/assets/cache.html.83b1f755.js"><link rel="prefetch" href="/assets/cross-origin-resource-sharing.html.f5fa5b30.js"><link rel="prefetch" href="/assets/cross-origin.html.4032a9a4.js"><link rel="prefetch" href="/assets/download-file.html.186265ce.js"><link rel="prefetch" href="/assets/gcc.html.ee8d081b.js"><link rel="prefetch" href="/assets/gzip.html.9eb183a9.js"><link rel="prefetch" href="/assets/qiankun.html.ab499129.js"><link rel="prefetch" href="/assets/regexp.html.80ece7c3.js"><link rel="prefetch" href="/assets/vue3-reactivity.html.d546a9b9.js"><link rel="prefetch" href="/assets/index.html.5b0e47b3.js"><link rel="prefetch" href="/assets/404.html.ea6eaeaa.js"><link rel="prefetch" href="/assets/404.4d66fe86.js"><link rel="prefetch" href="/assets/Layout.a4a5a9b1.js">
    <link rel="stylesheet" href="/assets/style.acf36ec1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/background.png" alt="AimerFan"><span class="site-name can-hide">AimerFan</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/web/gcc" class="" aria-label="Web前端"><!--[--><!--]--> Web前端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/sql/01-abstract" class="" aria-label="SQL"><!--[--><!--]--> SQL <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tools/vim" class="" aria-label="工具库"><!--[--><!--]--> 工具库 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/drafts/permission" class="" aria-label="草稿箱"><!--[--><!--]--> 草稿箱 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/todo" class="" aria-label="TODO"><!--[--><!--]--> TODO <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/web/gcc" class="" aria-label="Web前端"><!--[--><!--]--> Web前端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/sql/01-abstract" class="" aria-label="SQL"><!--[--><!--]--> SQL <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tools/vim" class="" aria-label="工具库"><!--[--><!--]--> 工具库 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/drafts/permission" class="" aria-label="草稿箱"><!--[--><!--]--> 草稿箱 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/todo" class="" aria-label="TODO"><!--[--><!--]--> TODO <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/drafts/permission" class="sidebar-item sidebar-heading" aria-label="Vue自定义指令实现权限分配"><!--[--><!--]--> Vue自定义指令实现权限分配 <!--[--><!--]--></a><!----></li><li><a href="/drafts/brew-change-origin" class="sidebar-item sidebar-heading" aria-label="brew 更换源"><!--[--><!--]--> brew 更换源 <!--[--><!--]--></a><!----></li><li><a href="/drafts/shadow-socks-r" class="sidebar-item sidebar-heading" aria-label="ShadowSocksR"><!--[--><!--]--> ShadowSocksR <!--[--><!--]--></a><!----></li><li><a href="/drafts/v2ray" class="router-link-active sidebar-item sidebar-heading active" aria-label="v2ray"><!--[--><!--]--> v2ray <!--[--><!--]--></a><!----></li><li><a href="/drafts/package.json" class="sidebar-item sidebar-heading" aria-label="package.json"><!--[--><!--]--> package.json <!--[--><!--]--></a><!----></li><li><a href="/drafts/package-manager" class="sidebar-item sidebar-heading" aria-label="node 包管理工具"><!--[--><!--]--> node 包管理工具 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="使用-v2ray-搭建-vps" tabindex="-1"><a class="header-anchor" href="#使用-v2ray-搭建-vps" aria-hidden="true">#</a> 使用 v2Ray 搭建 VPS</h1><h2 id="部署之前" tabindex="-1"><a class="header-anchor" href="#部署之前" aria-hidden="true">#</a> 部署之前</h2><h3 id="时间是否准确" tabindex="-1"><a class="header-anchor" href="#时间是否准确" aria-hidden="true">#</a> 时间是否准确</h3><p>V2Ray 对于时间有比较严格的要求，要求服务器和客户端时间差绝对值不能超过90 秒，所以一定要保证时间足够准确。还好 V2Ray 并不要求时区一致。比如说自个儿电脑上的时间是北京时间（东 8 区）2017-07-31 12:08:31，但是 VPS 上的时区是东 9 区，所以 VPS 上的时间应该是 2017-07-31 13:07:01 到 2017-07-31 13:10:01 之间才能正常使用 V2Ray。当然，也可以自行改成自己想要的时区。</p><h3 id="时间校验" tabindex="-1"><a class="header-anchor" href="#时间校验" aria-hidden="true">#</a> 时间校验</h3><p>对于 V2Ray，它的验证方式包含时间，就算是配置没有任何问题，如果时间不正确，也无法连接 V2Ray 服务器的，服务器会认为你这是不合法的请求。所以系统时间一定要正确，只要保证时间误差在90 秒之内就没问题。</p><p>对于 VPS(Linux) 可以执行命令 <code>date -R</code> 查看时间：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">date</span> -R
Sun, <span class="token number">22</span> Jan <span class="token number">2017</span> <span class="token number">10</span>:10:36 -0500
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>输出结果中的 -0500 代表的是时区为西 5 区，如果转换成东 8 区时间则为 2017-01-22 23:10:36。</p><p>如果时间不准确，可以使用 date --set 修改时间：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">date</span> --set<span class="token operator">=</span><span class="token string">&quot;2017-01-22 16:16:23&quot;</span>
Sun <span class="token number">22</span> Jan <span class="token number">16</span>:16:23 GMT <span class="token number">2017</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你的服务器架构是 OpenVZ，那么使用上面的命令有可能修改不了时间，直接发工单联系 VPS 提供商的客服吧，就说你在 VPS 上运行的服务对时间有要求，要他们提供可行的修改系统时间的方法。</p><p>对 VPS 的时间校准之后接着是个人电脑，如何修改电脑上的时间我想不必我多说了。</p><p>无论是 VPS 还是个人电脑，时区是什么无所谓，因为 V2Ray 会自动转换时区，但是时间一定要准确。</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><h3 id="下载安装脚本" tabindex="-1"><a class="header-anchor" href="#下载安装脚本" aria-hidden="true">#</a> 下载安装脚本</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -O https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> --:--:-- --:--:-- --:--:--     <span class="token number">0</span>
  <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> --:--:--  <span class="token number">0</span>:00:01 --:--:--     <span class="token number">0</span>
<span class="token number">100</span> <span class="token number">21613</span>  <span class="token number">100</span> <span class="token number">21613</span>    <span class="token number">0</span>     <span class="token number">0</span>   <span class="token number">8732</span>      <span class="token number">0</span>  <span class="token number">0</span>:00:02  <span class="token number">0</span>:00:02 --:--:--  <span class="token number">8736</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="执行安装" tabindex="-1"><a class="header-anchor" href="#执行安装" aria-hidden="true">#</a> 执行安装</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">bash</span> install-release.sh
Downloading V2Ray archive: https://github.com/v2fly/v2ray-core/releases/download/v4.27.0/v2ray-linux-64.zip
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> --:--:-- --:--:-- --:--:--     <span class="token number">0</span>
  <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> --:--:-- --:--:-- --:--:--     <span class="token number">0</span>
<span class="token number">100</span>   <span class="token number">631</span>  <span class="token number">100</span>   <span class="token number">631</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">331</span>      <span class="token number">0</span>  <span class="token number">0</span>:00:01  <span class="token number">0</span>:00:01 --:--:--   <span class="token number">331</span>
  <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> --:--:--  <span class="token number">0</span>:00:02 --:--:--     <span class="token number">0</span>
<span class="token number">100</span> <span class="token number">12</span>.2M  <span class="token number">100</span> <span class="token number">12</span>.2M    <span class="token number">0</span>     <span class="token number">0</span>   841k      <span class="token number">0</span>  <span class="token number">0</span>:00:14  <span class="token number">0</span>:00:14 --:--:-- 1899k
Downloading verification <span class="token function">file</span> <span class="token keyword">for</span> V2Ray archive: https://github.com/v2fly/v2ray-core/releases/download/v4.27.0/v2ray-linux-64.zip.dgst
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> --:--:-- --:--:-- --:--:--     <span class="token number">0</span>
  <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> --:--:-- --:--:-- --:--:--     <span class="token number">0</span>
<span class="token number">100</span>   <span class="token number">636</span>  <span class="token number">100</span>   <span class="token number">636</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">294</span>      <span class="token number">0</span>  <span class="token number">0</span>:00:02  <span class="token number">0</span>:00:02 --:--:--   <span class="token number">295</span>
  <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> --:--:--  <span class="token number">0</span>:00:02 --:--:--     <span class="token number">0</span>
<span class="token number">100</span>   <span class="token number">590</span>  <span class="token number">100</span>   <span class="token number">590</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">133</span>      <span class="token number">0</span>  <span class="token number">0</span>:00:04  <span class="token number">0</span>:00:04 --:--:--   <span class="token number">282</span>
Reading package lists<span class="token punctuation">..</span>. Done
Building dependency tree       
Reading state information<span class="token punctuation">..</span>. Done
Suggested packages:
  <span class="token function">zip</span>
The following NEW packages will be installed:
  <span class="token function">unzip</span>
<span class="token number">0</span> upgraded, <span class="token number">1</span> newly installed, <span class="token number">0</span> to remove and <span class="token number">0</span> not upgraded.
Need to get <span class="token number">172</span> kB of archives.
After this operation, <span class="token number">580</span> kB of additional disk space will be used.
Get:1 http://mirrors.163.com/debian buster/main amd64 <span class="token function">unzip</span> amd64 <span class="token number">6.0</span>-23+deb10u1 <span class="token punctuation">[</span><span class="token number">172</span> kB<span class="token punctuation">]</span>
Fetched <span class="token number">172</span> kB <span class="token keyword">in</span> 1s <span class="token punctuation">(</span><span class="token number">173</span> kB/s<span class="token punctuation">)</span>   
Selecting previously unselected package unzip.
<span class="token punctuation">(</span>Reading database <span class="token punctuation">..</span>. <span class="token number">31383</span> files and directories currently installed.<span class="token punctuation">)</span>
Preparing to unpack <span class="token punctuation">..</span>./unzip_6.0-23+deb10u1_amd64.deb <span class="token punctuation">..</span>.
Unpacking <span class="token function">unzip</span> <span class="token punctuation">(</span><span class="token number">6.0</span>-23+deb10u1<span class="token punctuation">)</span> <span class="token punctuation">..</span>.
Setting up <span class="token function">unzip</span> <span class="token punctuation">(</span><span class="token number">6.0</span>-23+deb10u1<span class="token punctuation">)</span> <span class="token punctuation">..</span>.
Processing triggers <span class="token keyword">for</span> mime-support <span class="token punctuation">(</span><span class="token number">3.62</span><span class="token punctuation">)</span> <span class="token punctuation">..</span>.
Processing triggers <span class="token keyword">for</span> man-db <span class="token punctuation">(</span><span class="token number">2.8</span>.5-2<span class="token punctuation">)</span> <span class="token punctuation">..</span>.
info: <span class="token function">unzip</span> is installed.
info: Extract the V2Ray package to /tmp/tmp.vk9AF2EqKA/ and prepare it <span class="token keyword">for</span> installation.
installed: /usr/local/bin/v2ray
installed: /usr/local/bin/v2ctl
installed: /usr/local/share/v2ray/geoip.dat
installed: /usr/local/share/v2ray/geosite.dat
installed: /usr/local/etc/v2ray/00_log.json
installed: /usr/local/etc/v2ray/01_api.json
installed: /usr/local/etc/v2ray/02_dns.json
installed: /usr/local/etc/v2ray/03_routing.json
installed: /usr/local/etc/v2ray/04_policy.json
installed: /usr/local/etc/v2ray/05_inbounds.json
installed: /usr/local/etc/v2ray/06_outbounds.json
installed: /usr/local/etc/v2ray/07_transport.json
installed: /usr/local/etc/v2ray/08_stats.json
installed: /usr/local/etc/v2ray/09_reverse.json
installed: /var/log/v2ray/
installed: /var/log/v2ray/access.log
installed: /var/log/v2ray/error.log
installed: /etc/systemd/system/v2ray.service
installed: /etc/systemd/system/v2ray@.service
removed: /tmp/tmp.vk9AF2EqKA/
info: V2Ray v4.27.0 is installed.
You may need to execute a <span class="token builtin class-name">command</span> to remove dependent software: <span class="token function">apt</span> remove <span class="token function">curl</span> <span class="token function">unzip</span>
Please execute the command: systemctl <span class="token builtin class-name">enable</span> v2ray<span class="token punctuation">;</span> systemctl start v2ray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>看到类似于这样的提示就算安装成功了。如果安装不成功脚本会有提示语句，这个时候你应当按照提示除错，除错后再重新执行一遍脚本安装 V2Ray。对于错误提示如果看不懂，使用翻译软件翻译一下就好。</p><p>运行 安装完之后，使用以下命令启动 V2Ray:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ systemctl start v2ray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在首次安装完成之后，V2Ray 不会自动启动，需要手动运行上述启动命令。</p><p>设置开机自启动 V2Ray:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ systemctl <span class="token builtin class-name">enable</span> v2ray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>接下来看看 V2ray 是不是真的运行起来了:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ systemctl status v2ray
● v2ray.service - V2Ray Service
   Loaded: loaded <span class="token punctuation">(</span>/etc/systemd/system/v2ray.service<span class="token punctuation">;</span> disabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Sun <span class="token number">2020</span>-08-16 <span class="token number">23</span>:17:13 CST<span class="token punctuation">;</span> 41min ago
 Main PID: <span class="token number">1984</span> <span class="token punctuation">(</span>v2ray<span class="token punctuation">)</span>
    Tasks: <span class="token number">6</span> <span class="token punctuation">(</span>limit: <span class="token number">2359</span><span class="token punctuation">)</span>
   Memory: <span class="token number">6</span>.9M
   CGroup: /system.slice/v2ray.service
           └─1984 /usr/local/bin/v2ray -confdir /usr/local/etc/v2ray/

Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: v2ctl<span class="token operator">&gt;</span> Read config:  /usr/local/etc/v2ray/01_api.json
Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: v2ctl<span class="token operator">&gt;</span> Read config:  /usr/local/etc/v2ray/02_dns.json
Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: v2ctl<span class="token operator">&gt;</span> Read config:  /usr/local/etc/v2ray/03_routing.json
Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: v2ctl<span class="token operator">&gt;</span> Read config:  /usr/local/etc/v2ray/04_policy.json
Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: v2ctl<span class="token operator">&gt;</span> Read config:  /usr/local/etc/v2ray/05_inbounds.json
Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: v2ctl<span class="token operator">&gt;</span> Read config:  /usr/local/etc/v2ray/06_outbounds.json
Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: v2ctl<span class="token operator">&gt;</span> Read config:  /usr/local/etc/v2ray/07_transport.json
Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: v2ctl<span class="token operator">&gt;</span> Read config:  /usr/local/etc/v2ray/08_stats.json
Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: v2ctl<span class="token operator">&gt;</span> Read config:  /usr/local/etc/v2ray/09_reverse.json
Aug <span class="token number">16</span> <span class="token number">23</span>:17:13 debian v2ray<span class="token punctuation">[</span><span class="token number">1984</span><span class="token punctuation">]</span>: <span class="token number">2020</span>/08/16 <span class="token number">23</span>:17:13 <span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> v2ray.com/core: V2Ray <span class="token number">4.27</span>.0 start
lines <span class="token number">1</span>-19/19 <span class="token punctuation">(</span>END<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>看到类似于这样的提示就算启动成功了。</p><p>但是由于此时你还没有为 V2ray 配置，所以咱们还是把它关掉吧：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ systemctl stop v2ray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>对于安装脚本，还有更多用法，在此不多说了，可以执行 bash install-release.sh -h 看帮助。</p><h3 id="客户端安装" tabindex="-1"><a class="header-anchor" href="#客户端安装" aria-hidden="true">#</a> 客户端安装</h3><p>点<a href="https://github.com/v2fly/v2ray-core/releases" target="_blank" rel="noopener noreferrer">这里<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>下载 V2Ray 的 Windows 压缩包，如果是 32 位系统，下载 v2ray-windows-32.zip，如果是 64 位系统，下载 v2ray-windows-64.zip（下载速度慢或无法下载请考虑挂已有的翻墙软件来下载）。下载并且解压之后会有下面这些文件：</p><ul><li>v2ray.exe 运行 V2Ray 的程序文件</li><li>wv2ray.exe 同 v2ray.exe，区别在于 wv2ray.exe 是后台运行的，不像 v2ray.exe 会有类似于 cmd 控制台的窗口。运行 V2Ray 时从 v2ray.exe 和 wv2ray.exe 中任选一个即可</li><li>config.json V2Ray 的配置文件，后面我们对 V2Ray 进行配置其实就是修改这个文件</li><li>v2ctl.exe V2Ray 的工具，有多种功能，除特殊用途外，一般由 v2ray.exe 来调用，用户不用太关心</li><li>geosite.dat 用于路由的域名文件</li><li>geoip.dat 用于路由的 IP 文件</li><li>其它 除上面的提到文件外，其他的不是运行 V2Ray 的必要文件。更详细的说明可以看 doc 文件夹下的 readme.md 文件，可以通过记事本或其它的文本编辑器打开查看</li></ul><p>实际上双击 v2ray.exe （或 wv2ray.exe） 就可以运行 V2Ray 了，V2Ray 会读取 config.json 中的配置与服务器连接。</p><h2 id="vmess" tabindex="-1"><a class="header-anchor" href="#vmess" aria-hidden="true">#</a> VMess</h2><h3 id="客户端配置" tabindex="-1"><a class="header-anchor" href="#客户端配置" aria-hidden="true">#</a> 客户端配置</h3><div class="language-json5 ext-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">1080</span><span class="token punctuation">,</span> <span class="token comment">// 监听端口</span>
      <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;socks&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 入口协议为 SOCKS 5</span>
      <span class="token property">&quot;sniffing&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;destOverride&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tls&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;auth&quot;</span><span class="token operator">:</span> <span class="token string">&quot;noauth&quot;</span>  <span class="token comment">//socks的认证设置，noauth 代表不认证，由于 socks 通常在客户端使用，所以这里不认证</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;outbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vmess&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 出口协议</span>
      <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;vnext&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;serveraddr.com&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 服务器地址，请修改为你自己的服务器 IP 或域名</span>
            <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">16823</span><span class="token punctuation">,</span>  <span class="token comment">// 服务器端口</span>
            <span class="token property">&quot;users&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;b831381d-6324-4d53-ad4f-8cda48b30811&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 用户 ID，必须与服务器端配置相同</span>
                <span class="token property">&quot;alterId&quot;</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// 此处的值也应当与服务器相同</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="服务端配置" tabindex="-1"><a class="header-anchor" href="#服务端配置" aria-hidden="true">#</a> 服务端配置</h3><div class="language-json5 ext-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">16823</span><span class="token punctuation">,</span> <span class="token comment">// 服务器监听端口</span>
      <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vmess&quot;</span><span class="token punctuation">,</span>    <span class="token comment">// 主传入协议</span>
      <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;clients&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;b831381d-6324-4d53-ad4f-8cda48b30811&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 用户 ID，客户端与服务器必须相同</span>
            <span class="token property">&quot;alterId&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;outbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;freedom&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 主传出协议</span>
      <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1261105760@qq.com">AimerFan</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.cbf35e07.js" defer></script>
  </body>
</html>
