import{_ as o,r as p,o as i,c,a as s,b as a,d as n,e}from"./app.cbf35e07.js";var r="data:image/png;base64,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",d="/assets/image-20210518223909095.2dec803c.png",l="/assets/image-20210518223646529.de869994.png";const u={},g=s("h1",{id:"\u524D\u7AEF\u4F18\u5316-\u5F00\u542Fgzip\u538B\u7F29",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u524D\u7AEF\u4F18\u5316-\u5F00\u542Fgzip\u538B\u7F29","aria-hidden":"true"},"#"),n(" \u524D\u7AEF\u4F18\u5316-\u5F00\u542FGzip\u538B\u7F29")],-1),k=s("h2",{id:"gzip",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#gzip","aria-hidden":"true"},"#"),n(" Gzip")],-1),h=s("blockquote",null,[s("p",null,"Gzip \u662F\u4E00\u79CD\u7528\u4E8E\u6587\u4EF6\u538B\u7F29\u4E0E\u89E3\u538B\u7F29\u7684\u6587\u4EF6\u683C\u5F0F\u3002\u5B83\u57FA\u4E8E Deflate \u7B97\u6CD5\uFF0C\u53EF\u5C06\u6587\u4EF6\u5FEB\u901F\u5730\u3001\u6D41\u5F0F\u5730\u538B\u7F29\uFF0C\u4ECE\u800C\u5B9E\u73B0\u66F4\u5FEB\u7684\u7F51\u7EDC\u4F20\u8F93\u3002 Web\u670D\u52A1\u5668\u4E0E\u73B0\u4EE3\u6D4F\u89C8\u5668\u666E\u904D\u5730\u652F\u6301 Gzip\uFF0C\u8FD9\u610F\u5473\u7740\u670D\u52A1\u5668\u53EF\u4EE5\u5728\u53D1\u9001\u6587\u4EF6\u4E4B\u524D\u81EA\u52A8\u4F7F\u7528 Gzip \u538B\u7F29\u6587\u4EF6\uFF0C\u800C\u6D4F\u89C8\u5668\u53EF\u4EE5\u5728\u63A5\u6536\u6587\u4EF6\u65F6\u81EA\u884C\u89E3\u538B\u7F29\u6587\u4EF6\u3002")],-1),m=n("DEFLATE\u662F"),v={href:"https://zh.wikipedia.org/wiki/LZ77%E4%B8%8ELZ78",target:"_blank",rel:"noopener noreferrer"},b=n("LZ77"),f=n("\u4E0E"),E={href:"https://zh.wikipedia.org/wiki/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81",target:"_blank",rel:"noopener noreferrer"},w=n("\u54C8\u592B\u66FC\u7F16\u7801"),C=n("\u7684\u4E00\u4E2A\u7EC4\u5408\u4F53\u3002\u901A\u5E38gzip\u4EC5\u7528\u6765\u538B\u7F29\u5355\u4E2A\u6587\u4EF6\u3002\u591A\u4E2A\u6587\u4EF6\u7684\u538B\u7F29\u5F52\u6863\u901A\u5E38\u662F\u9996\u5148\u5C06\u8FD9\u4E9B\u6587\u4EF6\u5408\u5E76\u6210\u4E00\u4E2A"),z={href:"https://zh.wikipedia.org/wiki/Tar_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)",target:"_blank",rel:"noopener noreferrer"},x=n("tar"),B=n("\u6587\u4EF6\uFF0C\u7136\u540E\u518D\u4F7F\u7528gzip\u8FDB\u884C\u538B\u7F29\uFF0C\u6700\u540E\u751F\u6210\u7684"),_=s("code",null,".tar.gz",-1),A=n("\u6216\u8005"),F=s("code",null,".tgz",-1),L=n("\u6587\u4EF6\u5C31\u662F\u6240\u8C13\u7684\u201Ctar\u538B\u7F29\u5305\u201D\u6216\u8005\u201Ctarball\u201D\u3002"),y=n("\u6CE8\u610F\u4E0D\u8981\u5C06gzip\u548C"),j={href:"https://zh.wikipedia.org/wiki/ZIP_(%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F)",target:"_blank",rel:"noopener noreferrer"},M=n("ZIP"),q=n("\u538B\u7F29\u683C\u5F0F\u6DF7\u6DC6\u3002ZIP\u4E5F\u4F7F\u7528DEFLATE\u7B97\u6CD5\uFF0C\u800C\u4E14\u53EF\u79FB\u690D\u6027\u66F4\u597D\uFF0C\u4E0D\u9700\u8981\u4E00\u4E2A\u5916\u90E8\u7684\u5F52\u6863\u5DE5\u5177\u5C31\u53EF\u4EE5\u5305\u5BB9\u591A\u4E2A\u6587\u4EF6\u3002\u4F46\u662F\uFF0C\u7531\u4E8EZIP\u5BF9\u6BCF\u4E2A\u6587\u4EF6\u8FDB\u884C\u5355\u72EC\u538B\u7F29\u800C\u6CA1\u6709\u5229\u7528\u6587\u4EF6\u95F4\u7684\u5197\u4F59\u4FE1\u606F\uFF08\u5373"),P={href:"https://zh.wikipedia.org/w/index.php?title=%E5%9B%BA%E5%AE%9E%E5%8E%8B%E7%BC%A9&action=edit&redlink=1",target:"_blank",rel:"noopener noreferrer"},R=n("\u56FA\u5B9E\u538B\u7F29"),Z=n("\uFF09\uFF0C\u6240\u4EE5ZIP\u7684\u538B\u7F29\u7387\u4F1A\u7A0D\u900A\u4E8Etar\u538B\u7F29\u5305\u3002"),O=e(`<h2 id="webpack\u4E2D\u5F00\u542Fgzip" tabindex="-1"><a class="header-anchor" href="#webpack\u4E2D\u5F00\u542Fgzip" aria-hidden="true">#</a> webpack\u4E2D\u5F00\u542FGzip</h2><p>\u9996\u5148\uFF0C\u9700\u8981\u5B89\u88C5<code>compression-webpack-plugin</code>\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> compression-webpack-plugin --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7136\u540E\u5C06\u63D2\u4EF6\u6DFB\u52A0\u5230\u60A8\u7684<code>webpack</code>\u914D\u7F6E\u4E2D\u3002\u4F8B\u5982</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),T=n("\u6CE8\u610F\uFF1Acompression-webpack-plugin 7 "),I={href:"https://github.com/webpack-contrib/compression-webpack-plugin/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"},G=n("\u4E0D\u518D\u652F\u6301 webpack4"),K=e('<p>\u914D\u7F6E\u9879\uFF1A</p><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>test</td><td><code>{String|RegExp|Array}</code></td><td><code>undefined</code></td><td>\u5305\u62EC\u6240\u6709\u901A\u8FC7\u6D4B\u8BD5\u65AD\u8A00\u7684\u8D44\u4EA7</td></tr><tr><td>include</td><td><code>{String|RegExp|Array}</code></td><td><code>undefined</code></td><td>\u5305\u62EC\u7B26\u5408\u4EE5\u4E0B\u4EFB\u4F55\u6761\u4EF6\u7684\u6240\u6709\u6587\u4EF6</td></tr><tr><td>exclude</td><td><code>{String|RegExp|Array}</code></td><td><code>undefined</code></td><td>\u6392\u9664\u7B26\u5408\u4EE5\u4E0B\u4EFB\u4F55\u6761\u4EF6\u7684\u6240\u6709\u6587\u4EF6</td></tr><tr><td>algorithm</td><td><code>{String|Function}</code></td><td><code>gzip</code></td><td>\u538B\u7F29\u7B97\u6CD5/\u529F\u80FD</td></tr><tr><td>compressionOptions</td><td><code>{Object}</code></td><td>gzip\u7684\u6700\u5927\u53EF\u7528\u538B\u7F29\u7EA7\u522B\uFF1A <code>{ level: 9 }</code></td><td>\u538B\u7F29\u9009\u9879</td></tr><tr><td>threshold</td><td><code>{Number}</code></td><td><code>0</code></td><td>\u4EC5\u5904\u7406\u5927\u4E8E\u6B64\u5927\u5C0F\u7684\u8D44\u4EA7\uFF08\u4EE5\u5B57\u8282\u4E3A\u5355\u4F4D\uFF09</td></tr><tr><td>minRatio</td><td><code>{Number}</code></td><td><code>0.8</code></td><td>\u4EC5\u538B\u7F29\u6BD4\u8BE5\u6BD4\u7387\u66F4\u597D\u7684\u8D44\u4EA7\uFF08\u538B\u7F29\u6BD4 = \u538B\u7F29\u540E\u7684\u4F53\u79EF/\u539F\u4F53\u79EF\uFF09</td></tr><tr><td>filename</td><td><code>{String|Function}</code></td><td><code>[path][base].gz</code></td><td>\u76EE\u6807\u8D44\u4EA7\u6587\u4EF6\u540D</td></tr><tr><td>deleteOriginalAssets</td><td><code>{Boolean|&#39;keep-source-map&#39;}</code></td><td><code>false</code></td><td>\u662F\u5426\u5220\u9664\u539F\u59CB\u8D44\u4EA7</td></tr></tbody></table><p>\u5F00\u542F Gzip \u540E\uFF0C\u4F1A\u53D1\u73B0\u6253\u5305\u540E\u7684\u6587\u4EF6\u4E2D\u5B58\u5728 <code>.gz</code> \u6587\u4EF6\u3002</p><p><img src="'+r+`" alt="image-20210518222808496"></p><h2 id="\u5F00\u542Fgzip" tabindex="-1"><a class="header-anchor" href="#\u5F00\u542Fgzip" aria-hidden="true">#</a> \u5F00\u542FGzip</h2><h3 id="node-js" tabindex="-1"><a class="header-anchor" href="#node-js" aria-hidden="true">#</a> Node.js</h3><p>node\u7AEF\u5F88\u7B80\u5355\uFF0C\u53EA\u8981\u52A0\u4E0Acompress\u6A21\u5757\u5373\u53EF\uFF0C\u4EE3\u7801\u5982\u4E0B</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> compression <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;compression&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//\u5C3D\u91CF\u5728\u5176\u4ED6\u4E2D\u95F4\u4EF6\u524D\u4F7F\u7528compression</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">compression</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u662F\u57FA\u672C\u7528\u6CD5\uFF0C\u5982\u679C\u8FD8\u8981\u5BF9\u8BF7\u6C42\u8FDB\u884C\u8FC7\u6EE4\u7684\u8BDD\uFF0C\u8FD8\u8981\u52A0\u4E0A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">compression</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">filter</span><span class="token operator">:</span> shouldCompress<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">shouldCompress</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&#39;x-no-compression&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8FD9\u91CC\u5C31\u8FC7\u6EE4\u6389\u4E86\u8BF7\u6C42\u5934\u5305\u542B&#39;x-no-compression&#39;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> compression<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),W=n("\u66F4\u591A\u7528\u6CD5\u8BF7\u79FB\u6B65"),X={href:"https://github.com/expressjs/compression",target:"_blank",rel:"noopener noreferrer"},D=n("compression\u6587\u6863"),Q=n(" \u5982\u679C\u7528\u7684\u662Fkoa\uFF0C\u7528\u6CD5\u548C\u4E0A\u9762\u7684\u5DEE\u4E0D\u591A"),H=e(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> compress <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;koa-compress&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">compress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> Nginx</h3><p>gzip\u4F7F\u7528\u73AF\u5883:http,server,location,if(x),\u4E00\u822C\u628A\u5B83\u5B9A\u4E49\u5728nginx.conf\u7684http{\u2026..}\u4E4B\u95F4</p><ul><li><p><strong>gzip on</strong></p><p>on\u4E3A\u542F\u7528\uFF0Coff\u4E3A\u5173\u95ED</p></li><li><p><strong>gzip_min_length 1k</strong></p><p>\u8BBE\u7F6E\u5141\u8BB8\u538B\u7F29\u7684\u9875\u9762\u6700\u5C0F\u5B57\u8282\u6570\uFF0C\u9875\u9762\u5B57\u8282\u6570\u4ECEheader\u5934\u4E2D\u7684Content-Length\u4E2D\u8FDB\u884C\u83B7\u53D6\u3002\u9ED8\u8BA4\u503C\u662F0\uFF0C\u4E0D\u7BA1\u9875\u9762\u591A\u5927\u90FD\u538B\u7F29\u3002\u5EFA\u8BAE\u8BBE\u7F6E\u6210\u5927\u4E8E1k\u7684\u5B57\u8282\u6570\uFF0C\u5C0F\u4E8E1k\u53EF\u80FD\u4F1A\u8D8A\u538B\u8D8A\u5927\u3002</p></li><li><p><strong>gzip_buffers 4 16k</strong></p><p>\u83B7\u53D6\u591A\u5C11\u5185\u5B58\u7528\u4E8E\u7F13\u5B58\u538B\u7F29\u7ED3\u679C\uFF0C\u20184 16k\u2019\u8868\u793A\u4EE516k*4\u4E3A\u5355\u4F4D\u83B7\u5F97</p></li><li><p><strong>gzip_comp_level 5</strong></p><p>gzip\u538B\u7F29\u6BD4\uFF081~9\uFF09\uFF0C\u8D8A\u5C0F\u538B\u7F29\u6548\u679C\u8D8A\u5DEE\uFF0C\u4F46\u662F\u8D8A\u5927\u5904\u7406\u8D8A\u6162\uFF0C\u6240\u4EE5\u4E00\u822C\u53D6\u4E2D\u95F4\u503C;</p></li><li><p><strong>gzip_types text/plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php</strong></p><p>\u5BF9\u7279\u5B9A\u7684MIME\u7C7B\u578B\u751F\u6548,\u5176\u4E2D&#39;text/html\u2019\u88AB\u7CFB\u7EDF\u5F3A\u5236\u542F\u7528</p></li><li><p><strong>gzip_http_version 1.1</strong></p><p>\u8BC6\u522Bhttp\u534F\u8BAE\u7684\u7248\u672C,\u65E9\u8D77\u6D4F\u89C8\u5668\u53EF\u80FD\u4E0D\u652F\u6301gzip\u81EA\u89E3\u538B,\u7528\u6237\u4F1A\u770B\u5230\u4E71\u7801</p></li><li><p><strong>gzip_vary on</strong></p><p>\u542F\u7528\u5E94\u7B54\u5934&quot;Vary: Accept-Encoding&quot;</p></li><li><p><strong>gzip_proxied off</strong></p><p>nginx\u505A\u4E3A\u53CD\u5411\u4EE3\u7406\u65F6\u542F\u7528</p><ul><li><p>off \u5173\u95ED\u6240\u6709\u4EE3\u7406\u7ED3\u679C\u7684\u6570\u636E\u7684\u538B\u7F29</p></li><li><p>expired \u542F\u7528\u538B\u7F29,\u5982\u679Cheader\u5934\u4E2D\u5305\u62EC&quot;Expires&quot;\u5934\u4FE1\u606F</p></li><li><p>no-cache \u542F\u7528\u538B\u7F29,header\u5934\u4E2D\u5305\u542B&quot;Cache-Control:no-cache&quot;</p></li><li><p>no-store \u542F\u7528\u538B\u7F29,header\u5934\u4E2D\u5305\u542B&quot;Cache-Control:no-store&quot;</p></li><li><p>private \u542F\u7528\u538B\u7F29,header\u5934\u4E2D\u5305\u542B&quot;Cache-Control:private&quot;</p></li><li><p>no_last_modefied \u542F\u7528\u538B\u7F29,header\u5934\u4E2D\u4E0D\u5305\u542B&quot;Last-Modified&quot;</p></li><li><p>no_etag \u542F\u7528\u538B\u7F29,\u5982\u679Cheader\u5934\u4E2D\u4E0D\u5305\u542B&quot;Etag&quot;\u5934\u4FE1\u606F</p></li><li><p>auth \u542F\u7528\u538B\u7F29,\u5982\u679Cheader\u5934\u4E2D\u5305\u542B&quot;Authorization&quot;\u5934\u4FE1\u606F</p></li></ul></li><li><p><strong>gzip_disable msie6</strong></p><p>(IE5.5\u548CIE6 SP1\u4F7F\u7528msie6\u53C2\u6570\u6765\u7981\u6B62gzip\u538B\u7F29 )</p><p>\u6307\u5B9A\u54EA\u4E9B\u4E0D\u9700\u8981gzip\u538B\u7F29\u7684\u6D4F\u89C8\u5668(\u5C06\u548CUser-Agents\u8FDB\u884C\u5339\u914D),\u4F9D\u8D56\u4E8EPCRE\u5E93</p></li></ul><p>\u4EE5\u4E0A\u4EE3\u7801\u53EF\u4EE5\u63D2\u5165\u5230 http {...}\u6574\u4E2A\u670D\u52A1\u5668\u7684\u914D\u7F6E\u91CC\uFF0C\u4E5F\u53EF\u4EE5\u63D2\u5165\u5230\u865A\u62DF\u4E3B\u673A\u7684 server {...}\u6216\u8005\u4E0B\u9762\u7684location\u6A21\u5757\u5185</p><h3 id="\u67E5\u770B\u662F\u5426\u6210\u529F\u4F7F\u7528gzip\u538B\u7F29\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u662F\u5426\u6210\u529F\u4F7F\u7528gzip\u538B\u7F29\u6587\u4EF6" aria-hidden="true">#</a> \u67E5\u770B\u662F\u5426\u6210\u529F\u4F7F\u7528Gzip\u538B\u7F29\u6587\u4EF6</h3><p>\u4E0D\u662F\u6BCF\u4E2A\u6D4F\u89C8\u5668\u90FD\u652F\u6301gzip\uFF0C\u5982\u4F55\u77E5\u9053\u5BA2\u6237\u7AEF\u662F\u5426\u652F\u6301gzip\u5462\uFF0C\u8BF7\u6C42\u5934\u4E2D\u6709\u4E2AAccept-Encoding\u6765\u6807\u8BC6\u5BF9\u538B\u7F29\u7684\u652F\u6301\u3002\u5BA2\u6237\u7AEFhttp\u8BF7\u6C42\u5934\u58F0\u660E\u6D4F\u89C8\u5668\u652F\u6301\u7684\u538B\u7F29\u65B9\u5F0F\uFF0C\u670D\u52A1\u7AEF\u914D\u7F6E\u542F\u7528\u538B\u7F29\uFF0C\u538B\u7F29\u7684\u6587\u4EF6\u7C7B\u578B\uFF0C\u538B\u7F29\u65B9\u5F0F\u3002\u5F53\u5BA2\u6237\u7AEF\u8BF7\u6C42\u5230\u670D\u52A1\u7AEF\u7684\u65F6\u5019\uFF0C\u670D\u52A1\u5668\u89E3\u6790\u8BF7\u6C42\u5934\uFF0C\u5982\u679C\u5BA2\u6237\u7AEF\u652F\u6301gzip\u538B\u7F29\uFF0C\u54CD\u5E94\u65F6\u5BF9\u8BF7\u6C42\u7684\u8D44\u6E90\u8FDB\u884C\u538B\u7F29\u5E76\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u6D4F\u89C8\u5668\u6309\u7167\u81EA\u5DF1\u7684\u65B9\u5F0F\u89E3\u6790\uFF0C\u5728http\u54CD\u5E94\u5934\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 content-encoding:gzip\uFF0C\u8FD9\u662F\u6307\u670D\u52A1\u7AEF\u4F7F\u7528\u4E86gzip\u7684\u538B\u7F29\u65B9\u5F0F\u3002</p><p>\u5982\u679C\u53D1\u73B0 Network \u4E2D\u6CA1\u6709 Content-Encoding \u5B57\u6BB5\uFF0C\u53EF\u4EE5 \u53F3\u952E\u8868\u5934 &gt; Response Headers &gt; Conten-Encoding\uFF0C\u6253\u5F00\u6B64\u9009\u9879\u3002</p><p><img src="`+d+'" alt="image-20210518223909095"></p><p><img src="'+l+'" alt="image-20210518223646529"></p>',10);function U(Y,N){const t=p("ExternalLinkIcon");return i(),c("div",null,[g,k,h,s("p",null,[m,s("a",v,[b,a(t)]),f,s("a",E,[w,a(t)]),C,s("a",z,[x,a(t)]),B,_,A,F,L]),s("p",null,[y,s("a",j,[M,a(t)]),q,s("a",P,[R,a(t)]),Z]),O,s("p",null,[s("strong",null,[T,s("a",I,[G,a(t)])])]),K,s("p",null,[W,s("a",X,[D,a(t)]),Q]),H])}var J=o(u,[["render",U],["__file","gzip.html.vue"]]);export{J as default};
